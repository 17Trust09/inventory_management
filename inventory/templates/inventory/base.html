{% load static %}
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <style>
        /* Verstecke den Body bis das JS ausgef√ºhrt wird */
        html.loading body {
            display: none;
        }
    </style>

    <link href="https://bootswatch.com/5/minty/bootstrap.min.css" rel="stylesheet">
    <link href="{% static 'css/dark_mode.css' %}" rel="stylesheet" id="dark-mode-style" disabled>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">

    <title>Inventarverwaltung</title>

    <script>
        // Setze direkt beim Parsen des HTMLs Dark Mode, damit kein Flackern entsteht
        (function() {
            if (localStorage.getItem('darkMode') === 'enabled') {
                document.documentElement.classList.remove('loading'); // sofort sichtbar
                const style = document.getElementById('dark-mode-style');
                if (style) style.removeAttribute('disabled');
            } else {
                document.documentElement.classList.remove('loading');
            }
        })();
    </script>
</head>
<body>
    {% include 'inventory/navigation.html' %}

    {% block content %}
    {% endblock content %}

    <script>
        // Dark Mode Umschalter
        function toggleDarkMode() {
            const darkModeStyle = document.getElementById('dark-mode-style');
            const isDarkMode = localStorage.getItem('darkMode') === 'enabled';
            const icon = document.querySelector('.navbar-nav .nav-item .btn-dark i');

            if (isDarkMode) {
                darkModeStyle.removeAttribute('disabled');
                icon?.classList.remove('bi-moon');
                icon?.classList.add('bi-sun');
            } else {
                darkModeStyle.setAttribute('disabled', true);
                icon?.classList.remove('bi-sun');
                icon?.classList.add('bi-moon');
            }
        }

        function switchMode() {
            const isDarkMode = localStorage.getItem('darkMode') === 'enabled';
            localStorage.setItem('darkMode', isDarkMode ? 'disabled' : 'enabled');
            toggleDarkMode();
        }

        // Initialisieren nach dem Laden
        window.onload = function() {
            toggleDarkMode();
        };
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
            crossorigin="anonymous"></script>
</body>
</html>
