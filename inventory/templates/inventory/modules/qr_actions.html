{# templates/inventory/modules/qr_actions.html #}
{% with oparam=overview.slug|default_if_none:'' nextparam=request.get_full_path|urlencode %}

  {# Nutzung der Model-Properties: item.qr_exists und item.qr_url #}
  {% if item.qr_exists %}
    <a href="{{ item.qr_url }}"
       target="_blank" rel="noopener"
       class="btn btn-sm btn-outline-light">
      QR
    </a>

    <a href="{{ item.qr_url }}"
       download
       class="btn btn-sm btn-outline-light ms-1">
      DL
    </a>
  {% else %}
    <a class="btn btn-sm btn-outline-light disabled" tabindex="-1" aria-disabled="true">QR</a>
    <a class="btn btn-sm btn-outline-light disabled ms-1" tabindex="-1" aria-disabled="true">DL</a>
  {% endif %}

  <form method="post"
        action="{% url 'regenerate-qr' item.id %}"
        class="d-inline-block ms-1">
    {% csrf_token %}
    {% if oparam %}<input type="hidden" name="o" value="{{ oparam }}">{% endif %}
    {% if nextparam %}<input type="hidden" name="next" value="{{ nextparam }}">{% endif %}
    <button type="submit" class="btn btn-sm btn-outline-light">QR neu</button>
  </form>

{% endwith %}
