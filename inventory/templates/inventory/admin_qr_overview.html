{% extends 'inventory/admin_base.html' %}
{% load static %}
{% get_media_prefix as MEDIA_URL %}

{% block admin_title %}QR-Code Übersicht{% endblock %}

{% block admin_content %}
<div class="card shadow-sm" style="background:var(--surface); border:1px solid var(--border); border-radius:.75rem;">
  <div class="card-body p-0">
    <table class="table table-hover align-middle mb-0" style="background:var(--surface); color:var(--text);">
      <thead style="background:var(--surface-2); color:var(--text);">
        <tr>
          <th style="width:30%">Name</th>
          <th style="width:15%">Schrank</th>
          <th style="width:15%">Schublade</th>
          <th style="width:40%" class="text-center">QR-Code</th>
        </tr>
      </thead>
      <tbody>
        {% for item in items %}
        <tr>
          <td>{{ item.name }}</td>
          <td>{{ item.location_letter|default:'–' }}</td>
          <td>{{ item.location_number|default:'–' }}</td>
          <td class="text-center">
            {% if item.id %}
              <img src="{{ MEDIA_URL }}qrcodes/qr_{{ item.id }}.jpg"
                   alt="QR-Code"
                   style="height:64px; border:1px solid var(--border); background:#fff; padding:2px; border-radius:6px;">
              <div class="mt-2">
                <a href="{{ MEDIA_URL }}qrcodes/qr_{{ item.id }}.jpg"
                   download
                   class="btn btn-sm btn-outline-light"
                   title="QR-Code herunterladen">
                  <i class="bi bi-download"></i>
                </a>
              </div>
            {% else %}
              <span class="text-muted">–</span>
            {% endif %}
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="4" class="text-center text-muted py-4">Keine Einträge vorhanden.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
